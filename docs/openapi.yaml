openapi: 3.0.0
info:
  title: APICraft API Platform
  description: Dynamic API Builder SaaS Backend Documentation
  version: 1.0.0

servers:
  - url: http://localhost:5500
    description: Local Development Server

paths:

  /signup:
    post:
      summary: User Signup
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                email:
                  type: string
                password:
                  type: string
      responses:
        "200":
          description: User created

  /login:
    post:
      summary: User Login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
      responses:
        "200":
          description: Returns JWT token

  /generate-api-key:
    post:
      summary: Generate API Key
      security:
        - bearerAuth: []
      responses:
        "200":
          description: API key generated

  /create-collection:
    post:
      summary: Create Collection
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                collectionName:
                  type: string
                fields:
                  type: array
                  items:
                    type: string
      responses:
        "200":
          description: Collection created

  /collections:
    get:
      summary: Get All Collections
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Collections list

  /collections/{name}:
    put:
      summary: Update Collection
      security:
        - bearerAuth: []
      parameters:
        - name: name
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Updated
    delete:
      summary: Delete Collection
      security:
        - bearerAuth: []
      parameters:
        - name: name
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Deleted

  /api/{collection}:
    post:
      summary: Create Data
      parameters:
        - name: collection
          in: path
          required: true
          schema:
            type: string
      security:
        - apiKeyAuth: []
      responses:
        "200":
          description: Data inserted
    get:
      summary: Get Data
      parameters:
        - name: collection
          in: path
          required: true
          schema:
            type: string
      security:
        - apiKeyAuth: []
      responses:
        "200":
          description: Data fetched

  /api/{collection}/{id}:
    put:
      summary: Update Data
      security:
        - apiKeyAuth: []
      parameters:
        - name: collection
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Updated
    delete:
      summary: Delete Data
      security:
        - apiKeyAuth: []
      parameters:
        - name: collection
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Deleted

  /api-logs:
    get:
      summary: API Usage Logs
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Logs returned

  /api-docs:
    get:
      summary: Auto Generated API Docs
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Docs returned

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

    apiKeyAuth:
      type: apiKey
      in: header
      name: x-api-key
